<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Mirage Detector | å•†ä¸šå¹»è§‰ç²‰ç¢æœº</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: '#fafafa', // Zinc 50
                        surface: '#ffffff', // White
                        border: '#e4e4e7', // Zinc 200
                        text: '#18181b', // Zinc 900
                        subtext: '#71717a', // Zinc 500
                        primary: '#4f46e5', // Indigo 600
                        success: '#059669', // Emerald 600
                        danger: '#e11d48', // Rose 600
                    },
                    fontFamily: {
                        // æ··åˆå­—ä½“ï¼šæ ‡é¢˜ç”¨æ— è¡¬çº¿ä½“ç°ç°ä»£æ„Ÿï¼Œæ•°æ®ç”¨ç­‰å®½ä½“ç°ä¸¥è°¨
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'monospace'],
                    },
                    boxShadow: {
                        'surgical': '0 10px 30px -5px rgba(0, 0, 0, 0.05), 0 4px 10px -2px rgba(0, 0, 0, 0.01)',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #fafafa;
            color: #18181b;
            font-family: 'Inter', sans-serif;
        }

        .font-mono {
            font-family: 'ui-monospace', monospace;
        }

        .fade-in {
            animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* è¿›åº¦æ¡åŠ¨ç”» */
        .progress-transition {
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* äº¤äº’å¾®åŠ¨æ•ˆ */
        .option-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>

<body
    class="min-h-screen flex flex-col items-center justify-center p-4 text-text selection:bg-primary selection:text-white">

    <main class="w-full max-w-xl bg-surface border border-border rounded-xl shadow-surgical overflow-hidden relative">

        <div class="h-1 w-full bg-gray-100">
            <div id="progress-bar" class="h-full bg-primary w-0 progress-transition"></div>
        </div>

        <header class="p-8 pb-6 border-b border-border flex justify-between items-start bg-white">
            <div>
                <h1 class="text-xl font-bold tracking-tight text-gray-900">The Mirage Detector</h1>
                <p class="text-xs text-subtext mt-1 font-mono uppercase tracking-wider">å•†ä¸šæ„æƒ³å®¡è®¡ç³»ç»Ÿ v2.0</p>
            </div>
            <div class="px-3 py-1 bg-gray-100 rounded-full border border-gray-200 flex items-center gap-2">
                <span class="w-1.5 h-1.5 rounded-full bg-success animate-pulse"></span>
                <span class="text-[10px] font-bold text-gray-500 uppercase">Ready</span>
            </div>
        </header>

        <div class="p-8 min-h-[320px] flex flex-col justify-center relative">

            <section id="step-1" class="fade-in w-full">
                <label class="block text-sm font-medium text-gray-700 mb-3">è¾“å…¥ä½ çš„å•†ä¸šæ„æƒ³</label>
                <div class="relative">
                    <textarea id="idea-input" rows="4"
                        class="w-full bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all resize-none text-gray-800 placeholder-gray-400 font-mono"
                        placeholder="ç®€å•æè¿°ä½ çš„æƒ³æ³•... &#10;ä¾‹å¦‚ï¼šä¸€ä¸ªé’ˆå¯¹ç‰™åŒ»è¯Šæ‰€çš„è‡ªåŠ¨åŒ–é¢„çº¦SaaS"></textarea>
                    <div class="absolute bottom-3 right-3 text-[10px] text-gray-400 uppercase font-mono">Input_Stream
                    </div>
                </div>
                <button onclick="startGauntlet()"
                    class="mt-6 w-full bg-gray-900 text-white font-medium py-3.5 rounded-lg hover:bg-black transition-all shadow-lg shadow-gray-200 active:scale-[0.98]">
                    å¼€å§‹å®¡è®¡æµç¨‹ â†’
                </button>
            </section>

            <section id="step-2" class="hidden w-full">
                <div class="mb-6 flex items-center gap-2 text-xs font-mono text-subtext border-b border-gray-100 pb-4">
                    <span class="text-primary font-bold">ANALYZING:</span>
                    <span id="display-idea" class="truncate max-w-[200px]"></span>
                </div>

                <div id="question-container" class="fade-in">
                </div>
            </section>

            <section id="step-3" class="hidden text-center fade-in w-full">
                <div class="mb-6 relative inline-block">
                    <svg class="w-32 h-32 transform -rotate-90">
                        <circle cx="64" cy="64" r="56" stroke="#f3f4f6" stroke-width="8" fill="transparent" />
                        <circle id="score-circle" cx="64" cy="64" r="56" stroke="#4f46e5" stroke-width="8"
                            fill="transparent" stroke-linecap="round" stroke-dasharray="351" stroke-dashoffset="351"
                            class="transition-all duration-1000 ease-out" />
                    </svg>
                    <div
                        class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center">
                        <span id="final-score" class="text-4xl font-bold tracking-tighter text-gray-900">0</span>
                        <span class="text-[10px] text-gray-400 font-mono uppercase mt-1">Score</span>
                    </div>
                </div>

                <h2 id="result-title" class="text-lg font-bold mb-3 uppercase tracking-tight"></h2>

                <div class="bg-gray-50 rounded-lg p-5 mb-8 text-left border border-gray-100">
                    <p id="result-critique" class="text-sm text-gray-600 font-mono leading-relaxed"></p>
                </div>

                <div class="flex gap-3">
                    <button onclick="resetApp()"
                        class="flex-1 bg-white border border-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-50 transition-colors text-xs font-bold uppercase tracking-wide">
                        é‡æµ‹
                    </button>
                    <button onclick="saveResult()"
                        class="flex-1 bg-primary text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors text-xs font-bold uppercase tracking-wide shadow-md shadow-indigo-100">
                        å½’æ¡£æŠ¥å‘Š
                    </button>
                </div>
            </section>

        </div>
    </main>

    <aside class="w-full max-w-xl mt-8">
        <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-4 pl-1">Audit Logs</h3>
        <div id="history-list" class="space-y-3">
        </div>
    </aside>

    <script>
        // æ ¸å¿ƒé€»è¾‘ä¿æŒä¸å˜ (The Algorithm)
        const state = { idea: "", currentQ: 0, score: 0, answers: [] };
        const questions = [
            {
                id: 'problem',
                title: "é—®é¢˜çš„æ–°æ—§ç¨‹åº¦",
                desc: "å¦‚æœæ˜¯æ–°é—®é¢˜ï¼Œä½ å¾—æ•™è‚²å¸‚åœºï¼›å¦‚æœæ˜¯è€é—®é¢˜ï¼Œå¸‚åœºå·²ç»å­˜åœ¨ã€‚",
                options: [
                    { text: "è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„é—®é¢˜ (æ²¡æœ‰äººå°è¯•è§£å†³)", value: 0, type: "mirage" },
                    { text: "è¿™æ˜¯ä¸€ä¸ªè€æ—§ã€ç”šè‡³æ— èŠçš„é—®é¢˜", value: 25, type: "boring" }
                ]
            },
            {
                id: 'appeal',
                title: "ç«äº‰æ€§æ„ŸæŒ‡æ•°",
                desc: "è¶Šæ€§æ„Ÿçš„é¢†åŸŸï¼ˆå¦‚ç¤¾äº¤ã€AIå¹³å°ï¼‰ï¼Œé€šå¸¸ä¹Ÿæ˜¯å°¸éª¨æœ€ç´¯ç´¯çš„é¢†åŸŸã€‚",
                options: [
                    { text: "å¬èµ·æ¥å¾ˆé…·/å¾ˆæ€§æ„Ÿ (High Competition)", value: 0, type: "mirage" },
                    { text: "å¬èµ·æ¥å¾ˆæ¯ç‡¥/å¾ˆå‚ç›´ (Low Competition)", value: 25, type: "boring" }
                ]
            },
            {
                id: 'permission',
                title: "è·å®¢æ‘©æ“¦åŠ›",
                desc: "å¦‚æœä½ éœ€è¦ç»™è€æ¿æ‰“ç”µè¯æ‰èƒ½å–å‡ºå»ï¼Œè¿™å°±æ˜¯é«˜æ‘©æ“¦ã€‚",
                options: [
                    { text: "éœ€è¦è¯·æ±‚è®¸å¯ (Sales Calls / Gatekeepers)", value: 5, type: "mirage" },
                    { text: "æ— éœ€è®¸å¯ (Traffic / SEO / Direct)", value: 25, type: "boring" }
                ]
            },
            {
                id: 'cost',
                title: "MVP éªŒè¯æˆæœ¬",
                desc: "èƒ½å¦åœ¨ä¸ç ´äº§çš„æƒ…å†µä¸‹çŸ¥é“è¿™ä¸ªæƒ³æ³•æ˜¯å¦å¯è¡Œï¼Ÿ",
                options: [
                    { text: "å¼€å‘éªŒè¯å‘¨æœŸ > 1ä¸ªæœˆ", value: 0, type: "mirage" },
                    { text: "èƒ½åœ¨ 48å°æ—¶ / $500 å†…éªŒè¯", value: 25, type: "boring" }
                ]
            }
        ];

        function startGauntlet() {
            const input = document.getElementById('idea-input').value.trim();
            if (!input) { alert("Input required."); return; }
            state.idea = input; state.currentQ = 0; state.score = 0; state.answers = [];
            document.getElementById('display-idea').innerText = input;
            toggleSection('step-1', 'step-2');
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[state.currentQ];
            const progress = ((state.currentQ + 1) / questions.length) * 100; // æ›´æ–°ä¸ºå½“å‰è¿›åº¦
            document.getElementById('progress-bar').style.width = `${progress}%`;

            let html = `
                <div class="fade-in">
                    <h3 class="text-gray-900 font-bold text-lg mb-1">${q.title}</h3>
                    <p class="text-gray-500 text-xs mb-6">${q.desc}</p>
                    <div class="grid gap-3">
            `;
            q.options.forEach((opt, idx) => {
                html += `
                    <button onclick="handleAnswer(${opt.value}, '${opt.type}')" 
                        class="option-card text-left p-5 bg-white border border-gray-200 rounded-lg hover:border-primary hover:shadow-md transition-all group flex items-start gap-3">
                        <div class="w-5 h-5 rounded-full border border-gray-300 flex items-center justify-center mt-0.5 group-hover:border-primary group-hover:bg-primary/5">
                            <span class="text-[10px] text-gray-400 group-hover:text-primary font-mono">${idx == 0 ? 'A' : 'B'}</span>
                        </div>
                        <span class="text-sm text-gray-700 group-hover:text-gray-900 font-medium">${opt.text}</span>
                    </button>
                `;
            });
            html += `</div></div>`;
            document.getElementById('question-container').innerHTML = html;
        }

        function handleAnswer(value, type) {
            state.score += value; state.answers.push(type); state.currentQ++;
            if (state.currentQ < questions.length) renderQuestion();
            else showResults();
        }

        function showResults() {
            toggleSection('step-2', 'step-3');
            calculateOutcome();
        }

        function toggleSection(hideId, showId) {
            document.getElementById(hideId).classList.add('hidden');
            document.getElementById(showId).classList.remove('hidden');
        }

        function calculateOutcome() {
            const score = state.score;
            const circle = document.getElementById('score-circle');
            const offset = 351 - (351 * score) / 100;

            setTimeout(() => {
                circle.style.strokeDashoffset = offset;
                // é¢œè‰²é€»è¾‘ï¼šSuccess(ç»¿) / Warning(é»„) / Danger(çº¢)
                if (score < 50) circle.style.stroke = '#e11d48'; // Rose
                else if (score < 80) circle.style.stroke = '#f59e0b'; // Amber
                else circle.style.stroke = '#059669'; // Emerald
            }, 100);

            let current = 0;
            const timer = setInterval(() => {
                current += 1;
                document.getElementById('final-score').innerText = current;
                if (current >= score) clearInterval(timer);
            }, 10);

            const title = document.getElementById('result-title');
            const critique = document.getElementById('result-critique');

            if (score < 50) {
                title.innerHTML = "<span class='text-danger'>ğŸ›‘ å¹»è§‰è­¦æŠ¥ (Mirage Alert)</span>";
                critique.innerHTML = `<strong>è¯Šæ–­ç»“æœï¼š</strong> ä½ åœ¨ä¸ºä¸€ä¸ªä¸å­˜åœ¨çš„å¸‚åœºåˆ¶é€ è§£å†³æ–¹æ¡ˆã€‚<br><br>è¿™æ˜¯å…¸å‹çš„â€œè‡ªå—¨å‹â€åˆ›ä¸šã€‚é«˜é£é™©ã€é«˜æˆæœ¬ã€ä½éœ€æ±‚ã€‚<br>å»ºè®®ï¼šæ”¾å¼ƒè¯¥æƒ³æ³•ï¼Œå›åˆ°â€œä»€ä¹ˆè®©äººç—›è‹¦â€è¿™ä¸ªé—®é¢˜ä¸Šæ¥ã€‚`;
            } else if (score < 80) {
                title.innerHTML = "<span class='text-yellow-600'>âš  å­˜åœ¨é£é™© (Risky Business)</span>";
                critique.innerHTML = `<strong>è¯Šæ–­ç»“æœï¼š</strong> æœ‰æ½œåŠ›ï¼Œä½†é˜»åŠ›ä¸å°ã€‚<br><br>ä½ çš„æƒ³æ³•æœ‰ä¸€åŠæ˜¯é è°±çš„ï¼Œä½†å¦ä¸€åŠï¼ˆé€šå¸¸æ˜¯è·å®¢æˆ–æˆæœ¬ï¼‰å¯èƒ½ä¼šæ‹–å®ä½ ã€‚<br>å»ºè®®ï¼šé™¤éä½ èƒ½é¢„å”®å‡º 10 å•ï¼Œå¦åˆ™ä¸è¦å†™ä»£ç ã€‚`;
            } else {
                title.innerHTML = "<span class='text-success'>âœ… å‡†è®¸é€šè¡Œ (Green Light)</span>";
                critique.innerHTML = `<strong>è¯Šæ–­ç»“æœï¼š</strong> è¿™æ˜¯ä¸€ä¸ªå®Œç¾çš„â€œæ— èŠâ€ç”Ÿæ„ã€‚<br><br>å¸‚åœºå­˜åœ¨ã€ç«äº‰ä¸æ€§æ„Ÿã€éªŒè¯æˆæœ¬ä½ã€‚è¿™æ˜¯ç°é‡‘æµç”Ÿæ„çš„é›å½¢ã€‚<br>å»ºè®®ï¼šæœ¬å‘¨æœ«å°±ä¸Šçº¿ MVPã€‚`;
            }
        }

        function resetApp() {
            document.getElementById('idea-input').value = "";
            document.getElementById('score-circle').style.strokeDashoffset = 351;
            toggleSection('step-3', 'step-1');
        }

        function saveResult() {
            const history = JSON.parse(localStorage.getItem('mirage_history_v2') || '[]');
            history.unshift({ idea: state.idea, score: state.score, date: new Date().toLocaleDateString() });
            localStorage.setItem('mirage_history_v2', JSON.stringify(history));
            renderHistory();
        }

        function renderHistory() {
            const list = document.getElementById('history-list');
            const history = JSON.parse(localStorage.getItem('mirage_history_v2') || '[]');
            if (history.length === 0) { list.innerHTML = `<div class="text-xs text-gray-400 text-center py-4 bg-gray-50 rounded-lg border border-dashed border-gray-200">æš‚æ— å®¡è®¡è®°å½•</div>`; return; }

            list.innerHTML = history.map(item => `
                <div class="bg-white border border-gray-100 p-4 rounded-lg shadow-sm flex justify-between items-center hover:shadow-md transition-shadow">
                    <div class="w-3/4">
                        <div class="text-[10px] text-gray-400 font-mono mb-1">${item.date}</div>
                        <div class="text-sm font-medium text-gray-800 truncate">${item.idea}</div>
                    </div>
                    <div class="text-lg font-bold font-mono ${item.score >= 80 ? 'text-success' : (item.score < 50 ? 'text-danger' : 'text-yellow-500')}">
                        ${item.score}
                    </div>
                </div>
            `).join('');
        }

        renderHistory();
    </script>

    <!-- P4: tool_meta (for tools-index.html) -->
    <script type="application/json" id="tool_meta">
{
  "tool_id": "mirage-detector",
  "tool_name": "å•†ä¸šå¹»è§‰æ£€æµ‹å™¨",
  "tool_version": "2.0.0",
  "description": "å¿«é€Ÿè¯„ä¼°åˆ›ä¸šæƒ³æ³•çš„å¯è¡Œæ€§å’Œé£é™©ï¼Œè¯†åˆ«å•†ä¸šå¹»è§‰",
  "capabilities": {
    "paste_first": false,
    "file_input": false,
    "download_output": false,
    "url_state": false,
    "local_draft": true,
    "networking": false,
    "ai": false
  },
  "tags": ["startup", "validation", "business", "analysis"]
}
    </script>
</body>

</html>