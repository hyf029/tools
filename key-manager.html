<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” å…¨å±€ API Key ç®¡ç†å™¨ v3.2</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-hover: #1d4ed8;
            --danger: #ef4444;
            --bg: #f8fafc;
            --text: #1e293b;
            --border: #cbd5e1;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            max-width: 600px;
            margin: 2rem auto;
            padding: 1rem;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
        }
        .card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }
        header {
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 1rem;
        }
        h2 { margin: 0; font-size: 1.5rem; color: var(--text); display: flex; align-items: center; gap: 8px; }
        .subtitle { font-size: 0.85rem; color: #64748b; margin-top: 0.5rem; }

        /* è¡¨å•é¡¹ */
        .provider-group { margin-bottom: 1.2rem; }
        .label-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.4rem; }
        label { font-weight: 600; font-size: 0.9rem; color: #334155; }
        .badge {
            background: #f1f5f9;
            color: #64748b;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-family: monospace;
            border: 1px solid #e2e8f0;
        }
        
        .input-wrapper { position: relative; display: flex; align-items: center; }
        input {
            width: 100%;
            padding: 10px 12px;
            padding-right: 40px; /* ä¸ºçœ¼ç›å›¾æ ‡ç•™ç©ºé—´ */
            border: 1px solid var(--border);
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.95rem;
            transition: all 0.2s;
            background: #fff;
        }
        input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }
        
        .toggle-vis {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            background: none;
            border: none;
            font-size: 1.1rem;
            opacity: 0.4;
            padding: 4px;
            transition: opacity 0.2s;
        }
        .toggle-vis:hover { opacity: 1; }

        /* æŒ‰é’®ç»„ - Grid å¸ƒå±€ */
        .actions { 
            margin-top: 2rem; 
            display: grid; 
            grid-template-columns: 2fr 1fr; 
            gap: 1rem; 
        }
        button {
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .btn-save { background: var(--primary); color: white; }
        .btn-save:hover { background: var(--primary-hover); }
        
        .btn-clear { background: #fee2e2; color: var(--danger); }
        .btn-clear:hover { background: #fecaca; }

        .toast {
            position: fixed; top: 20px; right: 20px;
            background: #10b981; color: white;
            padding: 10px 20px; border-radius: 8px;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 0.9rem;
            font-weight: 500;
            z-index: 999;
        }

        @media (max-width: 480px) { .actions { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="card">
    <header>
        <h2>ğŸ” å…¨å±€æ¨¡å‹å¯†é’¥é…ç½®</h2>
        <div class="subtitle">
            ğŸ“‚ æ•°æ®ä»…å­˜å‚¨äºæœ¬åœ°æµè§ˆå™¨ (LocalStorage)ï¼Œåˆ·æ–°é¡µé¢ä¾ç„¶æœ‰æ•ˆã€‚
        </div>
    </header>

    <div id="form-container"></div>

    <div class="actions">
        <button class="btn-save" onclick="saveAll()">
            ğŸ’¾ ä¿å­˜é…ç½® (Save)
        </button>
        <button class="btn-clear" onclick="clearAll()">
            ğŸ—‘ï¸ æ¸…ç©º (Reset)
        </button>
    </div>
</div>

<div id="toast" class="toast">âœ… é…ç½®å·²æˆåŠŸæ›´æ–°ï¼</div>

<script>
    // âœ… å·²æ·»åŠ  RapidAPI Key åˆ°åˆ—è¡¨é¦–ä½
    const PROVIDER_CONFIG = [
        { 
            id: "rapidapi", label: "RapidAPI Key (YouTube)", 
            keyName: "rapidapi_key", placeholder: "ä½ çš„ X-RapidAPI-Key..." 
        },
        { 
            id: "siliconflow", label: "ç¡…åŸºæµåŠ¨ (DeepSeek)", 
            keyName: "siliconflow_key", placeholder: "sk-..." 
        },
        { 
            id: "openrouter", label: "OpenRouter (èšåˆ)", 
            keyName: "openrouter_key", placeholder: "sk-or-v1-..." 
        },
        { 
            id: "deepseek", label: "DeepSeek å®˜æ–¹", 
            keyName: "deepseek_key", placeholder: "sk-..." 
        },
        { 
            id: "openai", label: "OpenAI å®˜æ–¹", 
            keyName: "openai_key", placeholder: "sk-..." 
        },
        { 
            id: "custom", label: "è‡ªå®šä¹‰ / Local (Custom)", 
            keyName: "custom_key", placeholder: "Bearer token / key..." 
        }
    ];

    const container = document.getElementById('form-container');

    // 1. æ¸²æŸ“è¡¨å•
    function renderForm() {
        container.innerHTML = PROVIDER_CONFIG.map(p => `
            <div class="provider-group">
                <div class="label-row">
                    <label for="${p.keyName}">${p.label}</label>
                    <span class="badge">${p.keyName}</span>
                </div>
                <div class="input-wrapper">
                    <input type="password" id="${p.keyName}" 
                           placeholder="${p.placeholder}" 
                           autocomplete="off" 
                           spellcheck="false">
                    <button class="toggle-vis" id="btn-${p.keyName}" 
                            onclick="toggleVisibility('${p.keyName}')" 
                            title="æ˜¾ç¤º/éšè—">ğŸ‘ï¸</button>
                </div>
            </div>
        `).join('');
        loadData();
    }

    // 2. åŠ è½½æ•°æ®
    function loadData() {
        PROVIDER_CONFIG.forEach(p => {
            const savedVal = localStorage.getItem(p.keyName);
            if (savedVal) {
                document.getElementById(p.keyName).value = savedVal;
            }
        });
    }

    // 3. åˆ‡æ¢æ˜¾ç¤º/éšè—
    function toggleVisibility(id) {
        const input = document.getElementById(id);
        const btn = document.getElementById(`btn-${id}`);
        
        if (input.type === 'password') {
            input.type = 'text';
            btn.textContent = 'ğŸ™ˆ';
            btn.style.opacity = '1';
        } else {
            input.type = 'password';
            btn.textContent = 'ğŸ‘ï¸';
            btn.style.opacity = '0.4';
        }
    }

    // 4. ä¿å­˜
    function saveAll() {
        let count = 0;
        PROVIDER_CONFIG.forEach(p => {
            const el = document.getElementById(p.keyName);
            const val = el.value.trim();
            if (val) {
                localStorage.setItem(p.keyName, val);
                count++;
            } else {
                if(localStorage.getItem(p.keyName)) {
                    localStorage.removeItem(p.keyName);
                }
            }
        });
        showToast(`âœ… å·²æ›´æ–° ${count} ä¸ªå¯†é’¥é…ç½®ï¼`);
    }

    // 5. æ¸…ç©º
    function clearAll() {
        if (confirm('âš ï¸ ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æœ¬åœ°å­˜å‚¨çš„å¯†é’¥å—ï¼Ÿ\næ¸…é™¤åç›¸å…³å·¥å…·å°†æ— æ³•è¿æ¥ APIã€‚')) {
            PROVIDER_CONFIG.forEach(p => {
                localStorage.removeItem(p.keyName);
                document.getElementById(p.keyName).value = '';
            });
            showToast('ğŸ—‘ï¸ æ‰€æœ‰å¯†é’¥å·²å®‰å…¨ç§»é™¤ã€‚');
        }
    }

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.textContent = msg;
        t.style.display = 'block';
        setTimeout(() => t.style.display = 'none', 2500);
    }

    renderForm();
</script>
</body>
</html>